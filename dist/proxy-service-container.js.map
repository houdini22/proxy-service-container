{"version":3,"file":"proxy-service-container.js","mappings":"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","sources":["webpack://proxy-service-container/webpack/bootstrap","webpack://proxy-service-container/webpack/runtime/define property getters","webpack://proxy-service-container/webpack/runtime/hasOwnProperty shorthand","webpack://proxy-service-container/webpack/runtime/make namespace object","webpack://proxy-service-container/./src/classes/Service.tsx","webpack://proxy-service-container/./src/classes/ProxyServiceContainer.tsx","webpack://proxy-service-container/./src/main.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","class Service {\n  methods: object = {};\n\n  dependencies: object = {};\n\n  _this: object = {};\n\n  constructor(methods, dependencies) {\n    this.methods = methods;\n    this.dependencies = dependencies;\n  }\n\n  hasMethod(name) {\n    return !!this.methods[name];\n  }\n\n  callMethod(name, args) {\n    let method = this.methods[name];\n    let match = method.toString().match(/^function\\s*[^\\(]*\\(\\s*([^\\)]*)\\)/m);\n    let argsNames = (match[1] || \"\").split(\",\");\n    let argsToInject = [];\n    let argsIndex = 0;\n    for (let name of argsNames) {\n      let dependency = this.dependencies[name.trim()];\n      if (dependency) {\n        argsToInject.push(dependency);\n      } else {\n        argsToInject.push(args[argsIndex++]);\n      }\n    }\n    return method.apply(this._this, argsToInject);\n  }\n}\n\nexport default Service;\n","import Service from \"./Service\";\n\nclass ProxyServicesContainer {\n  services: object = {};\n\n  defaultService: Service = null;\n\n  static ERR_NO_METHOD = -1;\n\n  static ERR_NO_SERVICE = -2;\n\n  addService(name, methodsObj, dependencies = {}, setDefault = false) {\n    if (Object.keys(this.services).length === 0) {\n      setDefault = true;\n    }\n    this.services[name] = new Service(methodsObj, dependencies);\n    if (setDefault) {\n      this.defaultService = this.services[name];\n    }\n    return this;\n  }\n\n  call(name: string, ...args: any) {\n    const service = this.getDefaultService();\n    if (service.hasMethod(name)) {\n      return service.callMethod(name, args);\n    }\n    return ProxyServicesContainer.ERR_NO_METHOD;\n  }\n\n  callAll(name: string, ...args: any) {\n    const result = {};\n    Object.keys(this.services).forEach((serviceName) => {\n      const service = this.getService(serviceName);\n      if (service.hasMethod(name)) {\n        result[serviceName] = service.callMethod(name, args);\n      } else {\n        result[serviceName] = ProxyServicesContainer.ERR_NO_METHOD;\n      }\n    });\n    return result;\n  }\n\n  callOn(arrServices: Array<string>, name: string, ...args: any): object {\n    const result = {};\n    arrServices.forEach((serviceName) => {\n      if (this.hasService(serviceName)) {\n        const service = this.getService(serviceName);\n        if (service.hasMethod(name)) {\n          result[serviceName] = service.callMethod(name, args);\n        } else {\n          result[serviceName] = ProxyServicesContainer.ERR_NO_METHOD;\n        }\n      } else {\n        result[serviceName] = ProxyServicesContainer.ERR_NO_SERVICE;\n      }\n    });\n    return result;\n  }\n\n  setDefaultService(name: string): ProxyServicesContainer | number {\n    if (typeof name == \"string\") {\n      if (this.hasService(name)) {\n        this.defaultService = this.getService(name);\n        return this;\n      }\n    }\n    return ProxyServicesContainer.ERR_NO_SERVICE;\n  }\n\n  getDefaultService(): Service {\n    return this.defaultService;\n  }\n\n  hasService(name: string): boolean {\n    return !!this.services[name];\n  }\n\n  getService(name: string): Service {\n    return this.services[name];\n  }\n}\n\nexport default ProxyServicesContainer;\n","import ProxyServiceContainer from \"./classes/ProxyServiceContainer\";\n\nexport default ProxyServiceContainer;\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","Service","methods","dependencies","this","name","args","method","argsToInject","argsIndex","toString","match","split","dependency","trim","push","apply","_this","ProxyServicesContainer","methodsObj","setDefault","keys","services","length","defaultService","service","getDefaultService","hasMethod","callMethod","ERR_NO_METHOD","result","forEach","serviceName","getService","arrServices","hasService","ERR_NO_SERVICE"],"sourceRoot":""}